var $user=$('input[name="user"]'),$pwd=$('input[name="pwd"]'),$rad=$('input[name="rad"]'),$clue=$(".clue"),$valibtn=$(".validate a"),$btn=$(".box>a"),$local=$(".local"),$arr=[!1,!1];function random(l,o){return Math.floor(Math.random()*(l-o+1)+o)}function convertCookieStrToObj(l){if(!l)return{};for(var o=l.split(","),r={},c=0;c<o.length;c++){var e=o[c].split(":");r[e[0]]=e[1]}return r}function convertObjToCookieStr(l){var o="";for(var r in l){o&&(o+=","),o+=r+":"+l[r]}return o}console.log($user,$pwd,$rad,$clue,$valibtn,$btn),$("#box").load("_register.html"),$user.blur(function(){var l=$(this).val();/^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$/.test(l)?$arr[0]=!0:($clue.html("手机号格式错误"),$clue.css({display:"block",color:"red"}),$clue.append("<span></span>"),$arr[0]=!1)}),$pwd.blur(function(){var l=$(this).val();/^[0-9A-Za-z_\.]{6,16}$/.test(l)?$arr[0]=!0:($clue.html("密码由6-16个字符组成"),$clue.css({display:"block",color:"red"}),$clue.append("<span></span>"),$arr[0]=!1)}),$valibtn.click(function(){console.log(1),$clue.html(random(999999,1e5)),$clue.css({color:"#666",display:"block"})}),$rad.blur(function(){$(this).val()!=$clue.html()&&(console.log(1),$(this).val("请输入正确验证码"),$(this).css({color:"red"}))}),$rad.focus(function(){$(this).val(""),$(this).css({color:"#666"})}),$btn.click(function(l){var o=$user.val(),r=$pwd.val(),c=$rad.val();if(console.log(1),!o)return $clue.html("请输入手机号"),$clue.css({display:"block",color:"red"}),void $clue.append("<span></span>");if(!r)return $clue.html("密码不能为空"),void $clue.css({display:"block",color:"red"});if(!c)return $clue.html("验证码不能为空"),void $clue.css({display:"block",color:"red"});var e=$.cookie("user")?$.cookie("user"):"",a=convertCookieStrToObj(e);o in a?($clue.html("手该机号已注册"),$clue.css({display:"block",color:"red"}),$clue.append("<span></span>")):(a[o]=r,e=convertObjToCookieStr(a),$.cookie("user",e,{expire:7,path:"/"}),$local.css({display:"block"}))}),$local.click(function(){location.href="login.html"}),console.log(random(999999,1e5));